<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>æ•°ä¸‡æ¡æ•°æ®ä¼˜åŒ– | icyfe</title>
<link rel="shortcut icon" href="https://icyfe.github.io/icyblog//favicon.ico?v=1592891916589">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.3.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://icyfe.github.io/icyblog//styles/main.css">
<link rel="alternate" type="application/atom+xml" title="æ•°ä¸‡æ¡æ•°æ®ä¼˜åŒ– | icyfe - Atom Feed" href="https://icyfe.github.io/icyblog//atom.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">



    <meta name="description" content="å½“ä¸€ä¸ªé¡µé¢çš„åˆ—è¡¨æœ‰å¤§é‡æ•°æ®å¦‚æœ‰ 100000 æ¡å¦‚ä½•ä¼˜åŒ–æ¸²æŸ“ï¼Ÿ
å½“æˆ‘ä»¬å°† 10W æ¡å…¨éƒ¨åœ¨é¡µé¢åŠ è½½çš„æ—¶å€™æ¸²æŸ“å‡ºæ¥ï¼Œå¯ä»¥å¾ˆæ˜æ˜¾çš„æ„Ÿå—åˆ°åŠ è½½é€Ÿåº¦ç¼“æ…¢å¹¶ä¸”å¯ä»¥çœ‹åˆ° DOM æ ‘éå¸¸éå¸¸çš„é•¿å½“å¿«é€Ÿä¸Šä¸‹æ»šåŠ¨æ—¶å€™ï¼Œå¶å°”è¿˜ä¼šå¡é¡¿ï¼Œä¸‹é¢æˆ‘ä»¬ç”¨ä»£ç å®ç°ä¸‹è¿™é‡Œç”¨..." />
    <meta name="keywords" content="javascript" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
    <script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://icyfe.github.io/icyblog/">
  <img class="avatar" src="https://icyfe.github.io/icyblog//images/avatar.png?v=1592891916589" alt="">
  </a>
  <h1 class="site-title">
    icyfe
  </h1>
  <p class="site-description">
    å¥½å¥½å­¦ä¹ å¤©å¤©å‘ä¸ŠğŸŒ¸
  </p>
  <div class="menu-container">
    
      
        <a href="https://icyfe.github.io/icyblog/" class="menu">
          é¦–é¡µ
        </a>
      
    
      
        <a href="https://icyfe.github.io/icyblog/archives" class="menu">
          å½’æ¡£
        </a>
      
    
      
        <a href="https://icyfe.github.io/icyblog/tags" class="menu">
          æ ‡ç­¾
        </a>
      
    
      
        <a href="https://icyfe.github.io/icyblog/post/about" class="menu">
          å…³äº
        </a>
      
    
  </div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              æ•°ä¸‡æ¡æ•°æ®ä¼˜åŒ–
            </h2>
            <div class="post-info">
              <span>
                2020-06-17
              </span>
              <span>
                5 min read
              </span>
              
                <a href="https://icyfe.github.io/icyblog/tag/Qh-_2RrfH/" class="post-tag">
                  # javascript
                </a>
              
            </div>
            
              <img class="post-feature-image" src="https://icyfe.github.io/icyblog//post-images/shu-wan-tiao-shu-ju-you-hua.png" alt="">
            
            <div class="post-content-wrapper">
              <div class="post-content">
                <h2 id="å½“ä¸€ä¸ªé¡µé¢çš„åˆ—è¡¨æœ‰å¤§é‡æ•°æ®å¦‚æœ‰-100000-æ¡å¦‚ä½•ä¼˜åŒ–æ¸²æŸ“">å½“ä¸€ä¸ªé¡µé¢çš„åˆ—è¡¨æœ‰å¤§é‡æ•°æ®å¦‚æœ‰ 100000 æ¡å¦‚ä½•ä¼˜åŒ–æ¸²æŸ“ï¼Ÿ</h2>
<p>å½“æˆ‘ä»¬å°† 10W æ¡å…¨éƒ¨åœ¨é¡µé¢åŠ è½½çš„æ—¶å€™æ¸²æŸ“å‡ºæ¥ï¼Œå¯ä»¥å¾ˆæ˜æ˜¾çš„æ„Ÿå—åˆ°åŠ è½½é€Ÿåº¦ç¼“æ…¢å¹¶ä¸”å¯ä»¥çœ‹åˆ° DOM æ ‘éå¸¸éå¸¸çš„é•¿å½“å¿«é€Ÿä¸Šä¸‹æ»šåŠ¨æ—¶å€™ï¼Œå¶å°”è¿˜ä¼šå¡é¡¿ï¼Œä¸‹é¢æˆ‘ä»¬ç”¨ä»£ç å®ç°ä¸‹è¿™é‡Œç”¨ vue å®ç°</p>
<pre><code class="language-vue">&lt;template&gt;
  &lt;div class=&quot;list-view&quot;&gt;
    &lt;!-- @scroll=&quot;handleScroll($event)&quot; --&gt;
    &lt;div class=&quot;list-view-item&quot; :style=&quot;{ height: itemHeight + 'px' }&quot; v-for=&quot;item in data&quot; :key=&quot;item.value&quot;&gt;{{ item }}&lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;
â€‹
&lt;style&gt;
.list-view {
  height: 600px;
  width: 200px;
  overflow: auto;
  position: relative;
  border: 1px solid #666;
}
â€‹ .list-view-phantom {
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  z-index: -1;
}
.list-view-content {
  position: absolute;
  height: 600px;
  z-index: 99;
  left: 0;
  right: 0;
  top: 0;
}
â€‹ .list-view-item {
  padding: 5px;
  color: #000;
  height: 30px;
  width: 200px;
  line-height: 30px;
  box-sizing: border-box;
}
&lt;/style&gt;
&lt;script&gt;
export default {
  props: {
    itemHeight: {
      type: Number,
      default: 30
    }
  },
  mounted() {},
  created() {
    for (let i = 0; i &lt; 100000; i++) {
      this.data.push('ç¬¬' + i + 'æ¡');
    }
  },
  data() {
    return {
      data: []
    };
  },
  methods: {}
};
&lt;/script&gt;
</code></pre>
<p>æ•ˆæœå›¾<br>
<img src="https://user-images.githubusercontent.com/44893721/54416187-a9439f80-4739-11e9-8cb5-bf7af0ba85c6.gif" alt="cc" loading="lazy"><br>
å¯ä»¥å¾ˆæ˜æ˜¾çš„çœ‹åˆ°å½“å¿«é€Ÿæ»‘åŠ¨æ—¶ç”»é¢çš„å¡é¡¿</p>
<h2 id="å¦‚ä½•ä¼˜åŒ–">å¦‚ä½•ä¼˜åŒ–ï¼Ÿ</h2>
<p>æˆ‘ä»¬çŸ¥é“å±å¹•éƒ½æ˜¯æœ‰ä¸€ä¸ªå¯è§†èŒƒå›´çš„ï¼Œæˆ‘ä»¬å› æ­¤å°±å¯ä»¥å½“èŠ‚ç‚¹åœ¨å¯è§†èŒƒå›´æ—¶å°±æ˜¾ç¤ºå‡ºæ¥ï¼Œå½“èŠ‚ç‚¹ä¸åœ¨å¯è§†èŒƒå›´æ—¶å€™å°±ç§»é™¤ï¼Œå› æ­¤æˆ‘ä»¬åªè¦æ¸²æŸ“å¯è§†èŒƒå›´çš„èŠ‚ç‚¹å³å¯<br>
ç”»ä¸ªå›¾<br>
<img src="https://user-images.githubusercontent.com/44893721/54416872-9762fc00-473b-11e9-87d6-9e0791a86d91.jpg" alt="1552636795(1)" loading="lazy"></p>
<p>ä¸»è¦åˆ†ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ã€‚ 1.è®¡ç®—çª—å£å¯è§†èŒƒå›´ï¼Œå¹¶æ ¹æ®å¯è§†èŒƒå›´è®¡ç®—å‡ºä¸€å±å¹•å¯è§çš„èŠ‚ç‚¹ã€‚ 2.ç›‘å¬æ»šåŠ¨è®¡ç®—æ¯æ¬¡æ»šåŠ¨å®Œæˆåçš„åˆå§‹èŠ‚ç‚¹å’Œæœ«å°¾èŠ‚ç‚¹ 3.æ ¹æ®æ–°çš„èµ·å§‹èŠ‚ç‚¹æ›¿æ¢å¯è§†åŒºåŸŸæ•°æ®<br>
å…·ä½“å®ç°å‚è€ƒäº†ä¸€ç¯‡ç½‘ä¸Šçš„åšå®¢å…·ä½“é“¾æ¥ä¼šåœ¨ä¸‹é¢æ³¨æ˜ï¼š</p>
<pre><code class="language-vue">&lt;template&gt;
  &lt;div class=&quot;list-view&quot; @scroll=&quot;handleScroll($event)&quot;&gt;
    &lt;div class=&quot;list-view-phantom&quot; :style=&quot;{ height: listheight + 'px' }&quot;&gt;&lt;/div&gt;
    &lt;div ref=&quot;content&quot; class=&quot;list-view-content&quot;&gt;
      &lt;div class=&quot;list-view-item&quot; :style=&quot;{ height: itemHeight + 'px' }&quot; v-for=&quot;item in visibleData&quot; :key=&quot;item.value&quot;&gt;{{ item }}&lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
export default {
  props: {
    itemHeight: {
      type: Number,
      default: 30
    }
  },
  mounted() {
    this.visibleCount = Math.ceil(this.$el.clientHeight / this.itemHeight); //è®¡ç®—å¯è§†åŒºåŸŸé«˜åº¦å¯æ˜¾ç¤ºæ•°æ®æ¡ç›®æ•°
    this.start = 0; //èµ·å§‹æ•°æ®ä¸‹æ ‡
    this.end = this.start + this.visibleCount; //æœ«å°¾æœ€åä¸€æ¡
    this.visibleData = this.data.slice(this.start, this.end); // åˆå§‹åŒ–å¯è§†åŒºåŸŸæ•°æ®
  },
  created() {
    for (let i = 0; i &lt; 100000; i++) {
      this.data.push('ç¬¬' + i + 'æ¡'); //åˆå§‹åŒ–10Wæ¡æ•°æ®
    }
    this.listheight = this.data.length * 30; //è®¡ç®—10wæ¡å…ƒç´ çš„æ€»é«˜åº¦
  },
  data() {
    return {
      data: [],
      start: 0,
      end: null,
      visibleCount: null, //
      visibleData: [],
      scrollTop: 0,
      listheight: ''
    };
  },
  methods: {
    //æ»šåŠ¨ç›‘å¬
    handleScroll(event) {
      const scrollTop = this.$el.scrollTop; //ç›‘å¬è·ç¦»é¡¶éƒ¨é«˜åº¦
      const fixedScrollTop = scrollTop - (scrollTop % 30); //ä¿®å¤ç§»åŠ¨ä½ç½®ä¸ç²¾ç¡®é—®é¢˜
      this.$refs.content.style.webkitTransform = `translate3d(0, ${fixedScrollTop}px, 0)`; //å®æ—¶ä½ç§»
      this.start = Math.floor(scrollTop / 30); //é‡æ–°è®¡ç®—èµ·å§‹æ¡ç›®ä¸‹æ ‡
      this.end = this.start + this.visibleCount; // é‡æ–°è®¡ç®—æœ«å°¾å°æ ‡
      this.visibleData = this.data.slice(this.start, this.end); //é‡æ–°è£…è½½å¯è§†åŒºåŸŸæ•°æ®
    }
  }
};
&lt;/script&gt;
&lt;style&gt;
.list-view {
  height: 400px;
  width: 200px;
  overflow: auto;
  position: relative;
  border: 1px solid #666;
}
â€‹ .list-view-phantom {
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  z-index: -1;
}
.list-view-content {
  position: absolute;
  height: 400px;
  z-index: 99;
  left: 0;
  right: 0;
  top: 0;
}
â€‹ .list-view-item {
  padding: 5px;
  color: #000;
  height: 30px;
  width: 200px;
  line-height: 30px;
  box-sizing: border-box;
}
&lt;/style&gt;
</code></pre>
<p>æ¥çœ‹çœ‹å®ç°åçš„å¿«é€Ÿæ»šåŠ¨çš„æ•ˆæœ<br>
<img src="https://user-images.githubusercontent.com/44893721/54417786-1c4f1500-473e-11e9-8602-0e19d27c6176.gif" alt="ccc" loading="lazy"><br>
<img src="https://user-images.githubusercontent.com/44893721/54417902-60421a00-473e-11e9-938e-10e19e226590.gif" alt="aaa" loading="lazy"></p>
<p>è¿™é‡Œä¸»è¦åˆ©ç”¨äº†ç»å¯¹å¸ƒå±€ï¼Œåˆ©ç”¨ä¸¤ä¸ªç»å¯¹å¸ƒå±€ä¸€ä¸ªæ²¡æœ‰ä»»ä½•å…ƒç´ ï¼Œä½†é«˜åº¦ä¸ºæ‰€æœ‰èŠ‚ç‚¹é«˜åº¦çš„åˆï¼Œåˆ©ç”¨è¿™ä¸ªæ’‘å¼€çˆ¶èŠ‚ç‚¹ä½¿å…¶æ»šåŠ¨æ¡å‡ºç°ï¼Œç¬¬äºŒä¸ªèŠ‚ç‚¹é«˜åº¦å’Œå¯è§†åŒºåŸŸé«˜åº¦ä¸€è‡´ï¼Œå½“ä¸æ–­æ»šåŠ¨çš„æ—¶å€™åˆ©ç”¨ä½ç§»è°ƒæ•´ä½ç½®ã€‚<br>
ç”»ä¸ªå›¾<br>
<img src="https://user-images.githubusercontent.com/44893721/54418395-cb402080-473f-11e9-9d0f-7dd49266f1fd.jpg" alt="1552638608(1)" loading="lazy"></p>
<p>æ— è®ºå¦‚ä½•æ»‘åŠ¨ï¼Œå¯è§†åŒºåŸŸçš„èŒƒå›´å°±é‚£ä¹ˆå¤§ï¼Œå› æ­¤ä¸ä¼šé€ æˆé¡µé¢å¤§é‡ DOM èŠ‚ç‚¹çš„å­˜åœ¨å¯¼è‡´å¡é¡¿é—®é¢˜çš„å‡ºç°<br>
å‚è€ƒå®ç°https://zhuanlan.zhihu.com/p/26022258</p>

              </div>
              <div class="toc-container">
                <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#%E5%BD%93%E4%B8%80%E4%B8%AA%E9%A1%B5%E9%9D%A2%E7%9A%84%E5%88%97%E8%A1%A8%E6%9C%89%E5%A4%A7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%A6%82%E6%9C%89-100000-%E6%9D%A1%E5%A6%82%E4%BD%95%E4%BC%98%E5%8C%96%E6%B8%B2%E6%9F%93">å½“ä¸€ä¸ªé¡µé¢çš„åˆ—è¡¨æœ‰å¤§é‡æ•°æ®å¦‚æœ‰ 100000 æ¡å¦‚ä½•ä¼˜åŒ–æ¸²æŸ“ï¼Ÿ</a></li>
<li><a href="#%E5%A6%82%E4%BD%95%E4%BC%98%E5%8C%96">å¦‚ä½•ä¼˜åŒ–ï¼Ÿ</a></li>
</ul>
</li>
</ul>

              </div>
            </div>
          </article>
        </div>

        
          <div class="next-post">
            <div class="next">ä¸‹ä¸€ç¯‡</div>
            <a href="https://icyfe.github.io/icyblog/post/hello/">
              <h3 class="post-title">
                Hello~fine
              </h3>
            </a>
          </div>
        

        
          
            <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

<div id="gitalk-container"></div>

<script>

  var gitalk = new Gitalk({
    clientID: 'b5c28ec6bd13b8deb4f2',
    clientSecret: '4f8fb75044211e6b3cfade41f69a78185924b102',
    repo: 'icyblog',
    owner: 'icyfe',
    admin: ['icyfe'],
    id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
    distractionFreeMode: false  // Facebook-like distraction free mode
  })

  gitalk.render('gitalk-container')

</script>

          

          
        

        <div class="site-footer">
  ok fine~
  <a class="rss" href="https://icyfe.github.io/icyblog//atom.xml" target="_blank">
    <i class="ri-rss-line"></i> RSS
  </a>
</div>

      </div>
    </div>

    <script>
      hljs.initHighlightingOnLoad()

      let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

      // This should probably be throttled.
      // Especially because it triggers during smooth scrolling.
      // https://lodash.com/docs/4.17.10#throttle
      // You could do like...
      // window.addEventListener("scroll", () => {
      //    _.throttle(doThatStuff, 100);
      // });
      // Only not doing it here to keep this Pen dependency-free.

      window.addEventListener("scroll", event => {
        let fromTop = window.scrollY;

        mainNavLinks.forEach((link, index) => {
          let section = document.getElementById(decodeURI(link.hash).substring(1));
          let nextSection = null
          if (mainNavLinks[index + 1]) {
            nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
          }
          if (section.offsetTop <= fromTop) {
            if (nextSection) {
              if (nextSection.offsetTop > fromTop) {
                link.classList.add("current");
              } else {
                link.classList.remove("current");    
              }
            } else {
              link.classList.add("current");
            }
          } else {
            link.classList.remove("current");
          }
        });
      });

    </script>
  </body>
</html>
